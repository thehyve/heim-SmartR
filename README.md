###SmartR is a grails plugin seeking to improve the visual analytics of the [tranSMART platform](https://github.com/transmart/transmartApp) by using recent web technologies such as [d3](http://d3js.org/).

![alt tag](http://i.imgur.com/8qltmqs.png)


---
*SmartR is still under development and requires testers in order to further improve.
There is no warranty of any kind that it works as intended.
Keep it mind that making use of this software is at your own risk!*

**Please report bugs and issues here: [Issues](http://usersupport.etriks.org)**

---

####What is SmartR?
Please have a look at these [Youtube videos](https://www.youtube.com/channel/UCKUbu0z3CQfi6RcFermONSw).

####Version & Changelog
https://github.com/sherzinger/SmartR/blob/master/CHANGELOG

Current Version 0.4
- **SmartR and the eAE merge into one project named eTRIKS Analytics. [Please update the datasetExplorer.js entry!](https://github.com/sherzinger/SmartR#how-to-add-smartr-to-your-own-transmart-installation)**
- **New Workflow added: Volcanoplots. (Additional features will be added in future updates)**
- **New Feature: SmartR is now capable of displaying static images generated by R**
- New Feature: KEGG pathway analysis for heatmap gene clusters
- New Feature: Categorical concept sorting in heatmap
- New Feature: Subset selection is now shown in the SmartR tab, similar to Advanced Workflows
- New Feature: Added wrapper for AJAX calls which makes it very simple to achieve on-the-fly updates. [Example](https://github.com/sherzinger/SmartR/blob/master/grails-app/views/visualizations/_outSample.gsp)
- General: Improved error handling
- General: Fixed a bug which caused the previous session to be resycled when not wanted
- General: Fixed a bug which caused the "(Re-)Run Analysis" button to remain disabled under certain conditions
- Heatmap Workflow: Fixed a bug which caused the "Load 100 add. feat." button to fail
- Heatmap Workflow: Fixed a bug that sometimes occured when applying a cutoff
- Heatmap Workflow: Fixed a bug which caused additional LDD to be not displayed correctly
- Heatmap Workflow: Fixed a bug that occured when two LDD nodes had the same name
- Heatmap Workflow: Fixed a bug which causes the wrong options to display when changing number of subsets
- Timeline Workflow: Fixed the correlogram feature after it was broken in 0.3
- Timeline Workflow: Fixed a bug which occured when the first/last timepoint was not in the zoom range
- Correlation Workflow: Improved behavior when selecting too few points for statistics
- Correlation Workflow: Increased scatterplot size
- Boxplot Workflow: Replaced the KDE gauss kernel with the epanechnikov kernel for nicer plots

Version 0.3
- Fix: Big datasets lead no longer to an unpextect error
- Fix: Feature ranking works correctly now
- Fix: Added log2 to Heatmap tooltip
- Fix: Cutoff in Heatmap will not work anymore with 2 rows or less
- Fix: Heatmap can now handle datasets containing duplicated probeset ids
- Improved Heatmap script performance
- Fix: Correlation visualization behaves correctly now when resizing
- Fix: The "Run Analysis" button will now enable again even if JS rendering fails

Version 0.2
- Fix: Session management should be more stable now
- Fix: Large datasets should not cause SmartR to crash anymore
- Fix: Heatmap - switched red and green color
- Fix: Heatmap - use log2 values instead of raw values for ranking
- Fix: Heatmap - improved contrast

####How to add SmartR to your own tranSMART installation:
1 - Add this to your BuildConfig.groovy:
```javascript
	grails.plugin.location.smartR = '/path/to/SmartR'
```
2 - Add this to transmartApp/web-app/js/datasetExplorer/datasetExplorer.js:
```javascript
  loadPlugin('smartR', "/EtriksEngines/loadScripts", function () {
  	  resultsTabPanel.insert(4, etriksPanel);
  });
```
Attention: Make sure that the above code is in the same scope than loadPlugin().
You could for example search for DALLIANCE and add it somewhere close.
3 - Run "grails war" to compile a WAR file containing SmartR

####Requirements:
- tranSMART 1.2.4 & 1.2.5 (Feature "cohort updating" not available)
- tranSMART 1.3 (full support)
- tranSMART eTRIKS/research branch (full support)
- R packages:
  - [jsonlite](https://cran.r-project.org/web/packages/jsonlite/index.html)
  - [reshape2](https://cran.r-project.org/web/packages/reshape2/index.html)
  - [limma](http://bioconductor.org/packages/release/bioc/html/limma.html)
  - [zoo](https://cran.r-project.org/web/packages/zoo/index.html) (only for Timeline Analysis)
  - [TSclust](https://cran.r-project.org/web/packages/TSclust/index.html) (only for Timeline Analysis)
- Tools and apps, make sure server instance has following tools installed:
  - zip 

####How to deploy your own visualization:
1. [Add an input view to specify the input data](https://github.com/sherzinger/SmartR/blob/master/grails-app/views/smartR/_inSample.gsp)
2. [Add an analysis script to prepare/order/filter the data and to compute statistical information](https://github.com/sherzinger/SmartR/blob/master/web-app/Scripts/Sample.R)
3. [Add an output view to visualize the processed data](https://github.com/sherzinger/SmartR/blob/master/grails-app/views/visualizations/_outSample.gsp)

